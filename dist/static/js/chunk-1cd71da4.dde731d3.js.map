{"version":3,"sources":["webpack:///./src/views/commission/list.vue?d445","webpack:///./src/views/commission/list.vue?0f91","webpack:///./src/views/commission/columns/list.js","webpack:///src/views/commission/list.vue","webpack:///./src/views/commission/list.vue?c7db","webpack:///./src/views/commission/list.vue","webpack:///./src/assets/noData.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","on","getMoney","model","value","queryForm","callback","$$v","$set","expression","month","$dayFormat","Date","isFlag","$event","refresh","_v","_s","time","_e","$formatCurrency","total","channelTotal","tableData","activeNames","_l","item","index","key","slot","company_name","Number","sum","column","ladder","scopedSlots","_u","fn","ref","row","start_price","end_price","channel_rate","amount","rate","staticRenderFns","prop","label","name","components","ZfTable","data","activeTab","computed","mounted","query","methods","handleClick","tab","console","log","getCommissionList","component","module","exports"],"mappings":"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","file":"static/js/chunk-1cd71da4.dde731d3.js","sourcesContent":["export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&id=d94018fc&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bgfff out_wrap\"},[_c('div',{staticClass:\"flex_between mb22\"},[_c('el-date-picker',{staticStyle:{\"width\":\"120px\"},attrs:{\"value-format\":\"yyyy-MM\",\"editable\":false,\"clearable\":false,\"placeholder\":\"请选择月份\",\"type\":\"month\"},on:{\"change\":_vm.getMoney},model:{value:(_vm.queryForm.month),callback:function ($$v) {_vm.$set(_vm.queryForm, \"month\", $$v)},expression:\"queryForm.month\"}}),(_vm.queryForm.month == _vm.$dayFormat(new Date(), 2))?_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.isFlag},on:{\"click\":function($event){return _vm.refresh()}}},[_vm._v(_vm._s(_vm.isFlag ? (_vm.time + \"s后可刷新数据\") : '刷新数据'))]):_vm._e()],1),_c('div',{staticClass:\"total_box mb20\"},[_c('span',[_vm._v(\"当月佣金：\"),_c('span',{staticClass:\"active_color\"},[_vm._v(\"￥\"+_vm._s(_vm.$formatCurrency(_vm.total)))])]),_c('span',{staticClass:\"ml20\"},[_vm._v(\"渠道总流水：\"),_c('span',{staticClass:\"active_color\"},[_vm._v(\"￥\"+_vm._s(_vm.$formatCurrency(_vm.channelTotal)))])])]),_c('div',{staticClass:\"card-warper\"},[(_vm.tableData.length)?_c('el-collapse',{model:{value:(_vm.activeNames),callback:function ($$v) {_vm.activeNames=$$v},expression:\"activeNames\"}},_vm._l((_vm.tableData),function(item,index){return _c('el-collapse-item',{key:index,attrs:{\"name\":index}},[_c('template',{slot:\"title\"},[_c('div',{staticClass:\"flex topWarper\"},[_c('div',{staticClass:\"name\",attrs:{\"title\":item.company_name}},[_vm._v(_vm._s(item.company_name))]),_c('div',{staticClass:\"num\"},[_vm._v(\"合计佣金:\"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"￥\"+_vm._s(_vm.$formatCurrency(Number(item.sum))))])])])]),_c('el-card',[_c('zf-table',{staticClass:\"mt20\",attrs:{\"columns\":_vm.column,\"data-source\":item.ladder,\"pagination\":false},scopedSlots:_vm._u([{key:\"start_price\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',[_c('span',[_vm._v(_vm._s(row.start_price))]),_vm._v(\"<月累计付款\"),(row.end_price !== '-1.00')?_c('span',[_vm._v(_vm._s((\"≤\" + (row.end_price))))]):_vm._e()])]}},{key:\"channel_rate\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',[_vm._v(_vm._s(row.channel_rate)+\"%\")])]}},{key:\"amount\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',[_vm._v(\"￥\"+_vm._s(_vm.$formatCurrency(row.amount)))])]}},{key:\"rate\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',[_vm._v(_vm._s(row.rate)+\"%\")])]}}],null,true)})],1)],2)}),1):_c('div',{staticClass:\"noData\"},[_c('img',{attrs:{\"src\":require(\"../../assets/noData.png\"),\"alt\":\"\"}}),_c('div',[_vm._v(\"暂无数据\")])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default [\n  {\n    prop: 'start_price',\n    label: '金额阶梯'\n  },\n  {\n    prop: 'channel_rate',\n    label: '代理商服务费率'\n  },\n  {\n    prop: 'rate',\n    label: '平台服务费率'\n  },\n  {\n    prop: 'pay_amount',\n    label: '结算金额'\n  },\n  {\n    prop: 'amount',\n    label: '代理商佣金'\n  }\n]\n","<template>\n  <div class=\"bgfff out_wrap\">\n    <!-- <el-tabs v-model=\"activeTab\" @tab-click=\"handleClick\">\n      <el-tab-pane label=\"佣金列表\" name=\"1\">\n\n      </el-tab-pane>\n      <el-tab-pane label=\"佣金支付记录\" name=\"2\">\n        佣金支付记录\n      </el-tab-pane>\n    </el-tabs> -->\n    <div class=\"flex_between mb22\">\n      <el-date-picker v-model=\"queryForm.month\" value-format=\"yyyy-MM\" :editable=\"false\" :clearable=\"false\" placeholder=\"请选择月份\" style=\"width: 120px;\" type=\"month\" @change=\"getMoney\" />\n      <el-button v-if=\"queryForm.month == $dayFormat(new Date(), 2)\" type=\"primary\" :disabled=\"isFlag\" @click=\"refresh()\">{{ isFlag ? `${time}s后可刷新数据` : '刷新数据' }}</el-button>\n    </div>\n    <div class=\"total_box mb20\">\n      <span>当月佣金：<span class=\"active_color\">￥{{ $formatCurrency(total) }}</span></span>\n      <span class=\"ml20\">渠道总流水：<span class=\"active_color\">￥{{ $formatCurrency(channelTotal) }}</span></span>\n    </div>\n    <div class=\"card-warper\">\n      <el-collapse v-if=\"tableData.length\" v-model=\"activeNames\">\n        <el-collapse-item v-for=\"(item, index) in tableData\" :key=\"index\" :name=\"index\">\n          <template slot=\"title\">\n            <div class=\"flex topWarper\">\n              <div class=\"name\" :title=\"item.company_name\">{{ item.company_name }}</div>\n              <div class=\"num\">合计佣金:<span style=\"color:red;\">￥{{ $formatCurrency(Number(item.sum)) }}</span></div>\n            </div>\n          </template>\n          <el-card>\n            <zf-table\n              class=\"mt20\"\n              :columns=\"column\"\n              :data-source=\"item.ladder\"\n              :pagination=\"false\"\n            >\n              <!-- 金额阶梯 -->\n              <template\n                slot=\"start_price\"\n                slot-scope=\"{ row }\"\n              >\n                <div><span>{{ row.start_price }}</span>&lt;月累计付款<span v-if=\"row.end_price !== '-1.00'\">{{ `&le;${row.end_price}` }}</span></div>\n              </template>\n              <!-- 结算金额 -->\n              <template\n                slot=\"channel_rate\"\n                slot-scope=\"{ row }\"\n              >\n                <div>{{ row.channel_rate }}%</div>\n              </template>\n              <!-- 代理商佣金 -->\n              <template\n                slot=\"amount\"\n                slot-scope=\"{ row }\"\n              >\n                <div>￥{{ $formatCurrency(row.amount) }}</div>\n              </template>\n              <!-- 平台服务费率 -->\n              <template\n                slot=\"rate\"\n                slot-scope=\"{ row }\"\n              >\n                <div>{{ row.rate }}%</div>\n              </template>\n              <!-- 渠道商服务费率 -->\n              <template\n                slot=\"channel_rate\"\n                slot-scope=\"{ row }\"\n              >\n                <div>{{ row.channel_rate }}%</div>\n              </template>\n            </zf-table>\n          </el-card>\n        </el-collapse-item>\n      </el-collapse>\n      <div v-else class=\"noData\">\n        <img src=\"../../assets/noData.png\" alt=\"\">\n        <div>暂无数据</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ZfTable from '@/components/ZfTable/CoreTable'\nimport column from './columns/list'\nimport { mapActions, mapGetters } from 'vuex'\nimport { throttle } from '@/utils/fn'\nexport default {\n  name: 'List',\n  components: {\n    ZfTable\n  },\n  data() {\n    return {\n      activeTab: '1',\n      activeNames: [0],\n      column,\n      time: 30 // 计时器\n    }\n  },\n  computed: {\n    ...mapGetters('commission', ['queryForm', 'tableData', 'total', 'channelTotal']),\n    isFlag() {\n      return this.time > 0 && this.time < 30\n    }\n  },\n  mounted() {\n    this.query()\n  },\n  methods: {\n    ...mapActions('commission', ['getCommissionList', 'freshCommissionFn']),\n    handleClick(tab) {\n      if (tab.name === '1') {\n        console.log(1)\n      } else {\n        console.log(2)\n      }\n    },\n    query() {\n      return this.getCommissionList(this.queryForm)\n    },\n    getMoney() {\n      this.query()\n    },\n    refresh: throttle(async function() {\n      let timer = null\n      if (timer) return\n      const res = await this.freshCommissionFn()\n      if (res.code === 200) {\n        await this.query()\n        this.$message.success('数据刷新成功!')\n        timer = setInterval(() => {\n          this.time--\n          if (this.time === 0) {\n            this.time = 30\n            clearTimeout(timer)\n          }\n        }, 1000)\n      }\n    }, 30000, true)\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.card-warper{\n  .topWarper{\n    font-weight: bold;\n    font-size: 16px;\n    padding-left: 20px;\n    box-sizing: border-box;\n    .name{\n      margin-right: 50px;\n      width: 200px;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n    }\n    .num{\n      overflow: hidden;\n    }\n  }\n  .card-item{\n    margin-bottom: 20px;\n    &:last-child{\n      margin-bottom: 0;\n    }\n  }\n}\n::v-deep{\n  .card-warper{\n    .el-collapse-item__header{\n      background-color: #F5F8FA;\n    }\n  }\n}\n.noData{\n  margin-top: 30px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  img{\n    width: 100px;\n    cursor: auto;\n  }\n  &>div{\n    margin-top: 5px;\n    color: #666;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./list.vue?vue&type=template&id=d94018fc&scoped=true&\"\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list.vue?vue&type=style&index=0&id=d94018fc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d94018fc\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"static/img/noData.aa501a5f.png\";"],"sourceRoot":""}